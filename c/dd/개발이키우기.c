#include <stdio.h>
#include <stdlib.h> // ëœë¤ ë³€ìˆ˜ í—¤ë” íŒŒì¼
#include <time.h> // í˜„ì¬ ì‹œê°„ ë³€ìˆ˜ í—¤ë” íŒŒì¼
#include <unistd.h> // sleep ë³€ìˆ˜ í—¤ë” íŒŒì¼

void AffScript(int today_aff, char* developet) // ì• ì •ë„ì— ë”°ë¥¸ ëŒ€ì‚¬
{
    if (today_aff > 8)
    {
        printf("%sì€(ëŠ”) ë‹¹ì‹ ì„ ì‚¬ë‘í•©ë‹ˆë‹¤! (ì• ì •ë„ +%d)\n", developet, today_aff);
    }
    else if (today_aff > 6)
    {
        printf("%sì€(ëŠ”) ê¸°ë»í•˜ê³  ìˆìŠµë‹ˆë‹¤! (ì• ì •ë„ +%d)\n", developet, today_aff);
    }
    else if (today_aff > 4)
    {
        printf("%sì€(ëŠ”) ì•„ë¬´ ìƒê° ì—†ì–´ ë³´ì…ë‹ˆë‹¤. (ì• ì •ë„ +%d)\n", developet, today_aff);
    }
    else if (today_aff > 2)
    {
        printf("%sì€(ëŠ”) ì‹¬ì‹¬í•´ ë³´ì…ë‹ˆë‹¤. (ì• ì •ë„ +%d)\n", developet, today_aff);
    }
    else
    {
        printf("%sì€(ëŠ”) ìš°ìš¸í•´ë³´ì…ë‹ˆë‹¤.. (ì• ì •ë„ +%d)\n", developet, today_aff);
    }
}

// 0 = ë¹ˆê³µê°„, 1 = ë²½, 2 = ê°œë°œì´, 3 = ìƒí•œ ìŒì‹, 4 = ì‚¬ë£Œ, 5 = ê³ êµ¬ë§ˆ

void RoomSetting(int room[][25], int rows) // ë°© ë°°ì—´ êµ¬ì¡° ì¶œë ¥
{ 
    int i, j;

    for (i = 0; i < rows; i++)
    {
        for (j = 0; j < 25; j++)
        {
            if (room[i][j] == 0) // ë¹ˆê³µê°„
            {
                printf("â¬› ");
            }
            else if (room[i][j] == 1) // ë²½
            {
                printf("â¬œ ");
            }
            else if (room[i][j] == 2) // ê°œë°œì´
            {
                printf("ğŸ‘¾ ");
            }
            else if (room[i][j] == 3) // ìƒí•œ ìŒì‹
            {
                printf("ğŸ„ ");
            }
            else if (room[i][j] == 4) // ì‚¬ë£Œ
            {
                printf("ğŸ– ");
            }
            else if (room[i][j] == 5) // ê³ êµ¬ë§ˆ
            {
                printf("ğŸ  ");
            }
        }
        printf("\n");
    }
}

int main(void)
{   
    int i, j;

    srand((int)time(NULL)); // í˜„ì¬ì‹œê°„ì„ ì´ìš©í•´ì„œ ëœë¤ ì”¨ë“œ ì„¤ì •

    // 0. ê°œë°œì´ ë³„ëª… ì…ë ¥ë°›ê¸°
    char developet[100]; // ê°œë°œì´ ì´ë¦„
    printf("ê°œë°œì´ í‚¤ìš°ê¸°ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!\n");
    printf("ê°œë°œì´ì˜ ì´ë¦„ì„ ì§€ì–´ì£¼ì„¸ìš”! : \n");
    scanf("%s", developet);
    printf("ê°œë°œì´ì˜ ì´ë¦„ : %s\nì˜ í‚¤ì›Œë³´ì•„ìš”!\n", developet);
    
    // 1. ë°°ì—´ë¡œ ê°œë°œì´ ë°© êµ¬í˜„ (ê°€ë¡œ 20 x ì„¸ë¡œ 25)
    int room[20][25] = {0,};

    // í„´ë§ˆë‹¤ ë³€í™”í•˜ëŠ” ë³€ìˆ˜ ëª¨ìŒ

    int aff = 0; // ì• ì •ë„, 0ë¶€í„° ì‹œì‘
    int today_aff; // ì˜¤ëŠ˜ì˜ ì• ì •ë„, 1~10
    int day = 1; // í„´
    double weight = 10;

    // ì¢Œí‘œì— ê´€ë ¨ëœ ë³€ìˆ˜ ëª¨ìŒ
    int first_place_i = 10; // ê°œë°œì´ ì²˜ìŒ xì¢Œí‘œ ë°›ì•„ì£¼ê³ , í˜„ì¬ xì¢Œí‘œ ê°±ì‹ 
    int first_place_j = 12; // ê°œë°œì´ ì²˜ìŒ xì¢Œí‘œ ë°›ì•„ì£¼ê³ , í˜„ì¬ yì¢Œí‘œ ê°±ì‹ 
    int second_place_i; // ë‹¤ìŒ xì¢Œí‘œ ìœ„ì¹˜
    int second_place_j; // ë‹¤ìŒ yì¢Œí‘œ ìœ„ì¹˜
    int temp_place_i; // ë²½ì— ë“¤ì–´ê°€ì§€ ì•Šê²Œ íŒë³„í•˜ê¸° ìœ„í•´ ì„ì‹œë¡œ xì¢Œí‘œê°’ ì €ì¥
    int temp_place_j; // ë²½ì— ë“¤ì–´ê°€ì§€ ì•Šê²Œ íŒë³„í•˜ê¸° ìœ„í•´ ì„ì‹œë¡œ yì¢Œí‘œê°’ ì €ì¥
    
    // ì¹´ìš´íŠ¸
    int eat_count = 0; // ì´ ë¨¹ì´ë¥¼ ë¨¹ì€ ê°œìˆ˜


    while (1) // 3. ë§¤í„´ ë¬¸êµ¬ ì¶œë ¥
    {
        int random_XorY = rand() % 2; // x ì›€ì§ì¼ì§€ y ì›€ì§ì¼ì§€ (5. ëœë¤ìœ¼ë¡œ ì¢Œìš° ìƒí•˜ í•œì¹¸ì”© ì›€ì§ì´ê¸°)
        
        // ë¨¹ì´ ë°°ì¹˜ë¥¼ ìœ„í•œ ë³€ìˆ˜
        int feed = rand() % 3 + 3; // 3, 4, 5 ì¤‘ì— ëœë¤ìœ¼ë¡œ ë°›ê¸°
        int feed_i = rand() % 18 + 1; // ë¨¹ì´ xì¢Œí‘œ ìœ„ì¹˜
        int feed_j = rand() % 23 + 1; // ë¨¹ì´ yì¢Œí‘œ ìœ„ì¹˜

        // ì¹´ìš´íŠ¸
        int whats_eat = 0; // ìŒì‹ ë¨¹ì€ íšŸìˆ˜ ì§€ì • ë° ì´ˆê¸°í™”
        int holl_in_one = 0;// ê°œë°œì´ ì…ì— ì‚¬ë£Œê°€ ì§í–‰í•  ê²½ìš° ì§€ì • ë° ì´ˆê¸°

        int afterimage_i = 0; // ê°œë°œì´ ì›€ì§ì´ê¸° ì „ xìœ„ì¹˜
        int afterimage_j = 0; // ê°œë°œì´ ì›€ì§ì´ê¸° ì „ yìœ„ì¹˜

        while (1)
        {
            if (random_XorY == 0) // x ì›€ì§ì´ëŠ” ê²½ìš°
            {
                temp_place_i = first_place_i + (rand() % 2) * 2 - 1;
                afterimage_i = first_place_i;
                if (temp_place_i == 0 || temp_place_i == 19) // ë²½ì— ë“¤ì–´ê°”ëŠ”ê°€? (4. ë°© ë²½ ë‚´ë¶€ì—ì„œë§Œ ì›€ì§ì´ê¸°)
                {
                    continue; // ì›€ì§ì´ì§€ ì•Šê³ , ë°˜ë³µë¬¸ ë‹¤ì‹œ
                }
                else // ë²½ì— ì•ˆ ë“¤ì–´ê°„ ê²½ìš°
                {
                    second_place_i = temp_place_i; // ì„ì‹œê°’ì— ë”í•´ë³¸ ê°’ì„ ì§„ì§œ ì¢Œí‘œê°’ì— ë°˜ì˜
                    first_place_i = second_place_i; // í˜„ì¬ xì¢Œí‘œê°’ì— ë°˜ì˜
                    break;
                }
            }
            else if (random_XorY == 1) // y ì›€ì§ì´ëŠ” ê²½ìš°
            {
                temp_place_j = first_place_j + (rand() % 2) * 2 - 1;
                afterimage_j = first_place_j;
                if (temp_place_j == 0 || temp_place_j == 24)
                {
                    continue;
                }
                else
                {
                    second_place_j = temp_place_j;
                    first_place_j = second_place_j;
                    break;
                }
            }
        }
        
        room[afterimage_i][afterimage_j] = 0; // ì”ìƒì— ë¹ˆê³µê°„ ê°’ ëŒ€ì…

        for (i = 0; i < 20; i++) // ë°© ì„¸íŒ…
        {
            for (j = 0; j < 25; j++)
            {
                if (i == 0 || j == 0 || i == 19 || j == 24) // ë²½ ì„¤ì •
                {
                    room[i][j] = 1; // 1 = ë²½
                }
                else if (first_place_i == i && first_place_j == j) // ë°›ì•„ì˜¨ xyì¢Œí‘œë¥¼ ê°œë°œì´ì—ê²Œ ë¶€ì—¬, ê°œë°œì´ ì„¤ì •
                {
                    // 8. ê°œë°œì´ê°€ ëŒì•„ë‹¤ë‹ˆë‹¤ê°€ ë¨¹ì´ì™€ ê°™ì€ ìœ„ì¹˜ë©´ ë¨¹ì´ ë¨¹ê¸°

                    if (room[i][j] == 3) // 3. ìƒí•œ ìŒì‹ì´ ìˆëŠ” ê³³ì¸ê°€?
                    {
                        // 9. ë¨¹ì´ì˜ ì¢…ë¥˜ì— ë”°ë¼ ëª¸ë¬´ê²Œ ëŠ˜ë¦¬ê¸°
                        weight -= 1; // ëª¸ë¬´ê²Œ ëŠ˜ë¦¬ê³ 
                        room[i][j] = 2; // ê°œë°œì´ë¡œ ë®ì–´ì”Œìš°ê¸°
                        whats_eat = 3; // feedê°’ê³¼ ë™ì¼í•˜ê²Œ +3
                    }
                    else if (room[i][j] == 4) // 4. ì‚¬ë£Œê°€ ìˆëŠ” ê³³ì¸ê°€?
                    {
                        weight += 1;
                        room[i][j] = 2;
                        whats_eat = 4; // feedê°’ê³¼ ë™ì¼í•˜ê²Œ +4
                    }
                    else if (room[i][j] == 5) // 5. ê³ êµ¬ë§ˆê°€ ìˆëŠ” ê³³ì¸ê°€?
                    {
                        weight += 3;
                        room[i][j] = 2;
                        whats_eat = 5; // feedê°’ê³¼ ë™ì¼í•˜ê²Œ +5
                    }
                    else // ì•„ë¬´ê²ƒë„ ì—†ëŠ” ê³³
                    {
                        room[i][j] = 2; // 2 = ê°œë°œì´
                    }

                    // ë‚®ì€ í™•ë¥ ì´ì§€ë§Œ, ê°œë°œì´ê°€ ì´ë™í•œ ê³³ì— ë¨¹ì´ê°€ ë°”ë¡œ ìƒê²¼ì„ ë•Œ
                    if (first_place_i == feed_i && first_place_j == feed_j)
                    {
                        holl_in_one = feed;
                    }
                    
                }
                else if (feed_i == i && feed_j == j) // //7. ë§¤í„´ ë°©ì•ˆ ëœë¤í•œ ìœ„ì¹˜ì— ë¨¹ì´ ë„£ê¸°
                {
                    if (room[i][j] == 0)
                    {
                        room[i][j] = feed; // ë¨¹ì´ì¹¸ ê°’ = 3, 4, 5ì¤‘ì— í•˜ë‚˜ë¡œ ë³€ê²½
                    }
                    else
                    {
                        // ë¨¹ì´ ì¹¸ì„ ìƒˆë¡­ê²Œ ì„¤ì •í•˜ê³ , ë¹ˆê³µê°„ì¼ ê²½ìš° ë„£ì–´ì£¼ê³  ì•„ë‹Œ ê²½ìš° ë‹¤ì‹œ ìƒˆë¡­ê²Œ ì„¤ì •
                        while (1)
                        {
                            int new_feed_i = rand() % 18 + 1;
                            int new_feed_j = rand() % 23 + 1;
                            if (room[new_feed_i][new_feed_j] == 0)
                            {
                                room[new_feed_i][new_feed_j] = feed;
                                break;
                            }
                            else if (room[new_feed_i][new_feed_j] == 2) // ë§Œì•½ ê°œë°œì´ë‘ ë§Œë‚¬ë‹¤ë©´?
                            {
                                if (first_place_i == new_feed_i && first_place_j == new_feed_j) // ê°œë°œì´ì˜ ì”ìƒì¸ì§€ ì•„ë‹Œì§€ í™•ì¸í•´ë³¸ë‹¤
                                {
                                    continue; // ë³¸ì²´ë¼ë©´ ê°’ ë‹¤ì‹œ ë½‘ê¸°
                                }
                                else // ì”ìƒì´ë¼ë©´ ì±„ì›Œì£¼ê¸°
                                {
                                    room[new_feed_i][new_feed_j] = feed;
                                    break;
                                }
                            }
                            else // 3, 4, 5ì¼ ê²½ìš°
                            {
                                continue;
                            }
                        }
                    }
                }
                else // í•„ìš”ì—†ì„ì¤„ ì•Œì•˜ìœ¼ë‚˜, ê°œë°œì´ ì¦ì‹ì„ ë§‰ê¸° ìœ„í•´ í•„ìš”
                {
                    if (room[i][j] == 2)
                    {
                        room[i][j] = 0; // ì´ì „ ê°œë°œì´ ìœ„ì¹˜(ì”ìƒ) ì´ˆê¸°í™” (ë‹¨, ì—¬ê¸°ë¥¼ ì˜¤ì§€ ì•Šìœ¼ë©´ ì”ìƒì´ ê³„ì† ë‚¨ì•„ìˆì–´ 2ê°œì”© ì¶œë ¥ë  ë•Œë„ ìˆìŒ)
                    }
                }
            }
            printf("\n");
        }
        
        printf("%dë²ˆì§¸ ë‚ \n", day);
        RoomSetting(room, sizeof(room) / sizeof(room[0])); // ê°œë°œì´ê°€ ìˆëŠ” ë°© ì¶œë ¥í•´ì£¼ëŠ” í•¨ìˆ˜
        
        if (whats_eat == 3 || holl_in_one == 3)
        {
            if (holl_in_one > 0)
            {
                weight -= 1;
                printf("ìƒí•œ ìŒì‹ì´ %s ë¨¸ë¦¬ ìœ„ë¡œ ë–¨ì–´ì¡ŒìŠµë‹ˆë‹¤! ìë™ ì„­ì·¨ë©ë‹ˆë‹¤. í˜„ì¬ ëª¸ë¬´ê²Œ : %0.1lf\n", developet, weight);
            }
            else
            {
                printf("%sì´(ê°€) ìƒí•œ ìŒì‹ì„ ë¨¹ì—ˆìŠµë‹ˆë‹¤. í˜„ì¬ ëª¸ë¬´ê²Œ : %0.1lf\n", developet, weight);
            }
            eat_count++;
            
            // 10. ìƒí•œ ìŒì‹ ë¨¹ê³  10% í™•ë¥ ë¡œ ì‚¬ë§, ê²Œì„ì¢…ë£Œ
            int food_poisoning = rand() % 100;
            if (food_poisoning == 0) // 0 ~ 99ì¤‘ì—ì„œ 0ì´ ê±¸ë ¸ì„ ë•Œ (=1%)
            {
                printf("ì´ëŸ´ìˆ˜ê°€! %sì´(ê°€) ì‹ì¤‘ë…ì— ê±¸ë ¤ ì‚¬ë§í–ˆìŠµë‹ˆë‹¤..\n", developet);
                break;
            }
        }
        else if (whats_eat == 4 || holl_in_one == 4)
        {
            if (holl_in_one > 0)
            {
                weight += 1;
                printf("ì‚¬ë£Œê°€ %s ë¨¸ë¦¬ ìœ„ë¡œ ë–¨ì–´ì¡ŒìŠµë‹ˆë‹¤! ìë™ ì„­ì·¨ë©ë‹ˆë‹¤. í˜„ì¬ ëª¸ë¬´ê²Œ : %0.1lf\n", developet, weight);
            }
            else
            {
                printf("%sì´(ê°€) ì‚¬ë£Œë¥¼ ë¨¹ì—ˆìŠµë‹ˆë‹¤. í˜„ì¬ ëª¸ë¬´ê²Œ : %0.1lf\n", developet, weight);
            }
            eat_count++;
        }
        else if (whats_eat == 5 || holl_in_one == 5)
        {
            if (holl_in_one > 0)
            {
                weight += 3;
                printf("ê³ êµ¬ë§ˆê°€ %s ë¨¸ë¦¬ ìœ„ë¡œ ë–¨ì–´ì¡ŒìŠµë‹ˆë‹¤! ìë™ ì„­ì·¨ë©ë‹ˆë‹¤. í˜„ì¬ ëª¸ë¬´ê²Œ : %0.1lf\n", developet, weight);
            }
            else
            {
                printf("%sì´(ê°€) ê³ êµ¬ë§ˆë¥¼ ë¨¹ì—ˆìŠµë‹ˆë‹¤. í˜„ì¬ ëª¸ë¬´ê²Œ : %0.1lf\n", developet, weight);
            }
            eat_count++;
        }
        else
        {
            printf("%sì´(ê°€) ì•„ë¬´ê²ƒë„ ë¨¹ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. í˜„ì¬ ëª¸ë¬´ê²Œ : %0.1lf\n", developet, weight);
        }

        // 10. ëª¸ë¬´ê²Œ 0kgê°€ ë˜ì–´ ì‚¬ë§
        if (weight <= 0) // 
        {
            printf("%sì´(ê°€) ì˜¤ë«ë™ì•ˆ ì•„ë¬´ê²ƒë„ ë¨¹ì§€ ëª»í•´ êµ¶ì–´ì£½ì—ˆìŠµë‹ˆë‹¤....\n", developet);
        }
        
        today_aff = rand() % 10 + 1;
        aff += today_aff; // 6. ì• ì •ë„ 1~10 ì¦ê°€
        AffScript(today_aff, developet);
        printf("í˜„ì¬ ì• ì •ë„ëŠ” %dì…ë‹ˆë‹¤.\n", aff);

        // 11. ê°œë°œì´ 100kg ë‹¬ì„±, ê²Œì„ì¢…ë£Œ
        if (weight >= 100)
        {
            // 12. ë¯¸ì…˜ ì„±ê³µ ê·¸ë¦¼, ë¬¸êµ¬, ì• ì •ë„, ì´ ë¨¹ì´ë¥¼ ë¨¹ì€ ê°œìˆ˜, í„´ ìˆ˜ ì¶œë ¥
            printf("â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¯â£–â¡·â¡â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â Ÿâ¡›â¡¿â¢›â£»â£¿â£¿â£¿â£¿â£¿â£¿â£¿\n");
            printf("â£¿â£¿â£¿â£¿â£¿â£¿â£Ÿâ£â£®â£»â£¯â¡³â¢Ÿâ£µâ£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£â ªâ¡¢â £â£±â£¿â£¿â£¿â£¿â£¿â£¿â£¿\n");
            printf("â£¿â£¿â£¿â£¿â ¿â£¿â£§â£³â¡³â¢¹â£¿â£§â£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£´â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿\n");
            printf("â£¿â£¿â£¿â â¡†â¢¸â£¿â£¿â£¿â£¹â£¿â¢¯â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â¢¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£·â£‘â£¨â ¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿\n");
            printf("â£¿â¡Ÿâ£‰â£¸â£¥â ™â£¿â£¿â£¿â£â¢°â Œâ£¯â¢â¡›â¢¿â¢¿â£Ÿâ¢°â †â ¿â ‹â¡Œâ¢½â£»â£»â£»â£¿â¡¿â Ÿâ£½â¢§â££â£¹â£¿â ‹â¡‰â¢¿â£¿â£¿\n");
            printf("â£¿â£·â£¤â¢€â¡¼â ²â¡Œâ ›â¢›â£ƒâ£˜â£ â ™â ”â¡‡â¢¸â¡â ¶â šâ šâ¢›â  â£§â£˜â Šâ¡´â¢¸â£¿â €â¡†â ˆâ¢­â£­â£‰â¢»â¢°â¡‡â£¾â£¿â£¿\n");
            printf("â£¿â¡¿â “â£ˆâ£€â£¡â¡¤â  â£­â¡…â£ â£„â ºâ €â£‡â£¬â Œâ¢â¡â£¦â ™â ˜â¢ƒâ¡”â¢°â ‡â ¾â ¿â¢¨â¡‡â †â£¾â¢ â£´â£¾â¢¸â¡§â ¤â „â¢¹\n");
            printf("â£¿â£·â£Œâ â¢€â£¸â£€â¢ºâ£¿â €â£â£¸â ƒâ €â¡‡â¢°â£¶â¢¦â ™â â£¯â£„â¡¦â¢±â£Œâ£™â¡›â£“â ˜â ƒâ£‡â “â ¶â ¦â †â¢¸â ‡â£¶â£¶â£¿\n");
            printf("â£¿â£¿â£§â£˜â£‰â£…â¢¸â €â¡¿â ·â ¬â ¥â¢¾â¢¦â¢°â£â¡–â¢«â£½â¡„â ³â ¼â¢ƒâ£¾â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¶â£¿â£¦â£¶â£¿â£¿â£¿\n");
            printf("â£¿â£¿â£¿â£¿â£¿â£¿â£¶â£¶â£½â£¨â¡«â£šâ£Œâ£¯â£§â£§â£¾â£¿â£¿â£¿â£·â£¶â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿\n");
            printf("ì¶•í•˜í•©ë‹ˆë‹¤! %sì´(ê°€) ë¬´ì‚¬íˆ 100kgì— ë„ë‹¬í–ˆìŠµë‹ˆë‹¤.\n", developet);
            printf("ì• ì •ë„ : %d\n", aff);
            printf("ì´ ë¨¹ì´ë¥¼ ë¨¹ì€ ê°œìˆ˜ : %d\n", eat_count);
            printf("í„´ ìˆ˜ : %d\n", day);
            break;
        }

        day++; // í„´ ìˆ˜ ì¶”ê°€
        usleep(1000000);
    }

    return 0;
}